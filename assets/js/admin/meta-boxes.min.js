jQuery(function(e){var t,a=e("#vessel_image_gallery"),i=e("#vessel_images_container").find("ul.vessel_images");e(".add_vessel_images").on("click","a",function(n){var r=e(this);return n.preventDefault(),t?void t.open():(t=wp.media.frames.vessel_gallery=wp.media({title:r.data("choose"),button:{text:r.data("update")},states:[new wp.media.controller.Library({title:r.data("choose"),filterable:"all",multiple:!0})]}),t.on("select",function(){var e=t.state().get("selection"),n=a.val();e.map(function(e){if(e=e.toJSON(),e.id){n=n?n+","+e.id:e.id;var t=e.sizes&&e.sizes.thumbnail?e.sizes.thumbnail.url:e.url;i.append('<li class="image" data-attachment_id="'+e.id+'"><img src="'+t+'" /><ul class="actions"><li><a href="#" class="delete" title="'+r.data("delete")+'">'+r.data("text")+"</a></li></ul></li>")}}),a.val(n)}),void t.open())}),i.sortable({items:"li.image",cursor:"move",scrollSensitivity:40,forcePlaceholderSize:!0,forceHelperSize:!1,helper:"clone",opacity:.65,placeholder:"ya-metabox-sortable-placeholder",start:function(e,t){t.item.css("background-color","#f6f6f6")},stop:function(e,t){t.item.removeAttr("style")},update:function(){var t="";e("#vessel_images_container").find("ul li.image").css("cursor","default").each(function(){var a=e(this).attr("data-attachment_id");t=t+a+","}),a.val(t)}}),e("#vessel_images_container").on("click","a.delete",function(){e(this).closest("li.image").remove();var t="";return e("#vessel_images_container").find("ul li.image").css("cursor","default").each(function(){var a=e(this).attr("data-attachment_id");t=t+a+","}),a.val(t),e("#tiptip_holder").removeAttr("style"),e("#tiptip_arrow").removeAttr("style"),!1}),e(".ya-repeater-add-row").click(function(t){var a=e(this).data("tmpl"),i=e("#"+a).html(),n=0,r=e(this).closest(".ya-repeater-table").find(".ya-repeater-tbody");r.find("tr").each(function(t,a){var i=parseInt(e(a).data("index"));i>n&&(n=i)}),n++;var l="__index__";return i=i.replace(new RegExp(l,"g"),n),r.append(i),e(document.body).trigger("ya-repeater-row-added"),!1}),e(".ya-repeater-table").on("click",".ya-repeater-remove-row",function(t){var a=e(this).closest("tr");return a.remove(),!1}),e(document.body).on("ya-init-unit-conversion",function(){e("select.unit-select").each(function(t,a){var i=e(this).val();e(this).data("prevunit",i)}),e(".options_group").on("change","select.unit-select",function(t){var a=e(this).closest(".form-field-unit").find(".unit-value"),i=e(this).val(),n=a.val();if(""!=n){var r=e(this).data("prevunit"),l=ya_convert_measurement(n,r,i);l&&a.val(l)}e(this).data("prevunit",i)})}).trigger("ya-init-unit-conversion"),e(document.body).on("ya-init-tabbed-panels",function(){e("ul.ya-tabs").show(),e("ul.ya-tabs a").click(function(t){t.preventDefault();var a=e(this).closest("div.panel-wrap");e("ul.ya-tabs li",a).removeClass("active"),e(this).parent().addClass("active"),e("div.panel",a).hide(),e(e(this).attr("href")).show()}),e("div.panel-wrap").each(function(){e(this).find("ul.ya-tabs li").eq(0).find("a").click()})}).trigger("ya-init-tabbed-panels")});