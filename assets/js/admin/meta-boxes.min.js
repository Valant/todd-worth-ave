jQuery(function(a){var b,c=a("#vessel_image_gallery"),d=a("#vessel_images_container").find("ul.vessel_images");a(".add_vessel_images").on("click","a",function(e){var f=a(this);return e.preventDefault(),b?void b.open():(b=wp.media.frames.vessel_gallery=wp.media({title:f.data("choose"),button:{text:f.data("update")},states:[new wp.media.controller.Library({title:f.data("choose"),filterable:"all",multiple:!0})]}),b.on("select",function(){var a=b.state().get("selection"),e=c.val();a.map(function(a){if(a=a.toJSON(),a.id){e=e?e+","+a.id:a.id;var b=a.sizes&&a.sizes.thumbnail?a.sizes.thumbnail.url:a.url;d.append('<li class="image" data-attachment_id="'+a.id+'"><img src="'+b+'" /><ul class="actions"><li><a href="#" class="delete" title="'+f.data("delete")+'">'+f.data("text")+"</a></li></ul></li>")}}),c.val(e)}),void b.open())}),d.sortable({items:"li.image",cursor:"move",scrollSensitivity:40,forcePlaceholderSize:!0,forceHelperSize:!1,helper:"clone",opacity:.65,placeholder:"ya-metabox-sortable-placeholder",start:function(a,b){b.item.css("background-color","#f6f6f6")},stop:function(a,b){b.item.removeAttr("style")},update:function(){var b="";a("#vessel_images_container").find("ul li.image").css("cursor","default").each(function(){var c=a(this).attr("data-attachment_id");b=b+c+","}),c.val(b)}}),a("#vessel_images_container").on("click","a.delete",function(){a(this).closest("li.image").remove();var b="";return a("#vessel_images_container").find("ul li.image").css("cursor","default").each(function(){var c=a(this).attr("data-attachment_id");b=b+c+","}),c.val(b),a("#tiptip_holder").removeAttr("style"),a("#tiptip_arrow").removeAttr("style"),!1}),a(document.body).on("ya-init-tabbed-panels",function(){a("ul.ya-tabs").show(),a("ul.ya-tabs a").click(function(b){b.preventDefault();var c=a(this).closest("div.panel-wrap");a("ul.ya-tabs li",c).removeClass("active"),a(this).parent().addClass("active"),a("div.panel",c).hide(),a(a(this).attr("href")).show()}),a("div.panel-wrap").each(function(){a(this).find("ul.ya-tabs li").eq(0).find("a").click()})}).trigger("ya-init-tabbed-panels")});